<!DOCTYPE html>
<html lang="zh-CN">
    <head>
	<meta name="generator" content="Hugo 0.68.3" />
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Kisama&#39;s Blog</title><meta name="Description" content="This is my cool site"><meta property="og:title" content="Kisama&#39;s Blog" />
<meta property="og:description" content="This is my cool site" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://moshimoshi.top/" />
<meta property="og:updated_time" content="2022-07-31T09:45:14+00:00" /><meta property="og:site_name" content="My cool site" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Kisama&#39;s Blog"/>
<meta name="twitter:description" content="This is my cool site"/>
<meta name="application-name" content="My cool site">
<meta name="apple-mobile-web-app-title" content="My cool site"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://moshimoshi.top/" /><link rel="alternate" href="/index.xml" type="application/rss+xml" title="Kisama&#39;s Blog">
    <link rel="feed" href="/index.xml" type="application/rss+xml" title="Kisama&#39;s Blog"><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https:\/\/moshimoshi.top\/","inLanguage": "zh-CN","description": "This is my cool site","name": "Kisama's Blog"
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Kisama&#39;s Blog">My cool site</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Kisama&#39;s Blog">My cool site</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><main class="main">
                <div class="container"><div class="page home" data-home="posts"><div class="home-profile"><div class="home-subtitle"><div id="id-1" class="typeit"></div></div><div class="links"></div></div>
<article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/posts/http-%E7%AC%94%E8%AE%B0/">HTTP 笔记</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Author</a></span>&nbsp;<span class="post-publish">published on <time datetime="2021-06-14">2021-06-14</time></span>&nbsp;<span class="post-category">included in <a href="/categories/%E7%AC%94%E8%AE%B0/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>笔记</a></span></div><div class="content">Q：GET 方法和 POST 方法的区别是什么？ A：除了 POST 方法可以有 body，GET 没有 body 之外其他的基本都是语义上的区别。比如 GET 方法是「安全的」、「幂等的」、GET 方法对应的 response 默认是应该被 cache 的，而 POST 方法的 response 只有在 headers 中包含 cache-control 或 Expires header 且为合适的值时才能被 cache。
  Q：HTTP cache 是什么？如何起作用的？ A：cache 指的是 HTTP 中定义的用来减少不必要的 message 发送和不必要的 entity 传输的一套机制，也指专门实现这种机制的服务器，也可以指与原始服务器 response 对应的 copy。cache 的机制分为两部分：expiration 和 validation，前者用于减少不必要的 message 发送，后者用于不必要的 entity 传输。expiration 的机制表现为：当客户端发送一个 request 到 cache server 时，cache server 会检查对应的 cache（假设有这样的 cache）是否是 fresh，如果是的话，直接从那个 cache 构造出对应的 response 发送给客户端。每个 cache 都有它对应的 freshness_lifetime 和 current_age，每次检验是否 fresh 时，只有当计算出来的 current_age 小于 freshness_lifetime 时，这个 cache 才会被认为是 fresh 的。其中 current_age 的算法与 origin server 的 response headers 里的 Date，Age 的值有关。freshness_lifetime 的算法则与 cache-control header 的 max-age 声明的值和 Expires header 的值有关。validation 的机制表现为：当一条 cache 过期被判定为不是 fresh 的之后，cache server 会像 origin server 重新发一条带有 if-none-match (其值来源于被 cache 的 response 的 etag header 值) 或/和 if-modified-since (其值来源于被 cache 的 response 的 last-modified header 值) 请求头的 request，origin server 会根据这两个请求头的值来决定 validation 是否通过，如果通过会给 cache 返回一个状态码为 304 的 response，收到这个 response 和 cache server 根据本地的 cache 构造出对应 response 返回给客户端；如果未通过，origin server 会返回一个新的状态码为 200 的 response 给 cache server，cache server 将这个 response 原本返回给客户端，并据此更新对应的已经不再 fresh 的 cache。</div><div class="post-footer">
        <a href="/posts/http-%E7%AC%94%E8%AE%B0/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/http/">HTTP</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/posts/github-action-%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E6%89%93%E5%8C%85%E5%8F%91%E5%B8%83%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE/">github action 配置自动打包发布前端项目</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Author</a></span>&nbsp;<span class="post-publish">published on <time datetime="2021-06-07">2021-06-07</time></span>&nbsp;<span class="post-category">included in <a href="/categories/github-action/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>github action</a></span></div><div class="content">前置条件  存在一对公、私钥，公钥在远程服务器用户 A（具体用户名随意）的 ~/.ssh/authrized_key 中，本地主机可通过私钥 ssh 登录用户 A 用户 A 对 /var/www/任意目录名（nginx 服务启动的根目录）有读写权限 私钥保存到项目的 secret 中（最好通过文本编辑器打开，然后粘贴复制，直接 cat 粘贴复制可能会导致 &ldquo;invalid format&rdquo;）  github action 操作步骤  将保存在 secret 中的私钥存到环境变量（感觉好像不存应该也可以？） 通过 actions/checkout 拉取代码和切换到项目根目录 通过 actions/setup-node 安装 node 和 npm  安装依赖，打包 将存在当前环境变量的私钥通过 echo 命令写到 github runner 的 ~/.ssh/id_rsa 文件中（其他目录或者其文件名也可以，只不过那样的话，scp 的时候就要显示指定完整路径名），并且将远程服务器的 host 添加到 ~/.ssh/known_hosts 文件中（此举好像为了是避免在第一次 ssh 陌生服务器时，系统会询问「是否确认要与远程服务器连接」而使得后续 action 中断） 通过 scp 命令将打包好的文件复制到远程服务器指定位置  完整 yml 文件 这里 SSH_KEY、SSH_PORT、HOST、SSH_PORT、USERNAME、TARGET_DIR 为提前在项目 secret 下配置的变量，如有需要像打包后的文件生成目录（此处是 ./docs/.vuepress/dist）也可以写进去。</div><div class="post-footer">
        <a href="/posts/github-action-%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E6%89%93%E5%8C%85%E5%8F%91%E5%B8%83%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/github-action/">github action</a>,&nbsp;<a href="/tags/ci/cd/">CI/CD</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/posts/unicode-%E7%AC%94%E8%AE%B0/">Unicode 笔记</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Author</a></span>&nbsp;<span class="post-publish">published on <time datetime="2021-05-13">2021-05-13</time></span>&nbsp;<span class="post-category">included in <a href="/categories/%E7%AC%94%E8%AE%B0/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>笔记</a></span></div><div class="content">什么是 Unicode：Unicode 是一个将现今世界大部分用于交流信息的字符（为组成文本的最小组成单元）映射成从 0 到 16 * 2^16 -1 的连续自然数集合的方案，为每个字符分配的自然数即成为该字符的 code point，通常是通过以十六进制表示的数字值（带有 &ldquo;U +&rdquo; 前缀）来引用它们。所有的字符被分为 17 个组（一共 1114112 个，每组 65536 个），大部分常用字符基本都被分到第一组（第一组被称为 Basic Multiple Plane），该组前 128 个字符与 ASCII 码对应的字符集一一对应。所以本质上讲，Unicode 与 ASCII 码将 128 个字符映射成 0 到 127 的自然数没有什么区别，只不过较 ASCII 码而言，Unicode 的编码方案要复杂得多得多。
  按照基本用途，1114112 个 code point 分为 7 个基本类型：
 Graphic：字母，标记，数字，标点，符号和空格 Format：不可见，但会影响邻近的字符；包括行、段落分隔符 Control：共 65 个（U+0000 到 U+001F 和 U+007F 到 U+009F 之间的 code point） Private-use：用于代表私用字符的 code point，这些字符的解释未由本标准规定，并且其使用可能由合作用户之间的专用协议确定，共 6400 个（U+E000 到 U+F8FF） Surrogate：用于 UTF-16 编码的代理，共 2048 个（U+D800 到 U+DBFF 和 U+DC00 到 U+DFFF 之间的 code point，前 1024 个称为前导代理，后 1024 个称为后尾代理） Noncharacter：Unicode 标准中永久保留供内部使用的 code point，共 66 个（U+FDD0 到 U+FDEF 中的 32 个加上 17 个组中每组的最后两个） Reserved：保留以供将来分配，但被限制用于信息交换    并非所有的 code point 都被分配给了某个字符的，只有 Graphic、Format、Control 和 Private-use 几个类型的 code point 有与之对应的字符；Surrogate 和 Noncharacter 两个类型的 code point 已经被分配，但分配的对象并不是字符；Reserved 保留以供将来分配，但被限制用于信息交换。所有未分配给特定字符的 code point 均被限制用于信息交换。</div><div class="post-footer">
        <a href="/posts/unicode-%E7%AC%94%E8%AE%B0/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/%E7%BC%96%E7%A0%81/">编码</a>,&nbsp;<a href="/tags/unicode/">Unicode</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/posts/new-vue%E5%88%B0%E6%89%80%E6%9C%89%E7%BB%84%E4%BB%B6mounte/">从 new Vue 到所有组件 mounted</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Author</a></span>&nbsp;<span class="post-publish">published on <time datetime="2020-11-15">2020-11-15</time></span>&nbsp;<span class="post-category">included in <a href="/categories/%E5%89%8D%E7%AB%AF/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>前端</a></span></div><div class="content">前言 在开始本篇之前：
  本篇的主要目的在于理解 mounted 的大致原理（mounted 之后的事不在本篇讨论之内）
  所用的 Vue 版本是 2.6.11，借以帮助理解的例子是 vue-cli 创建的简单 demo
  暂不理会包括但不仅限于 slot、函数式组件、服务端渲染以及其他一些不影响理解的特性
  贴出的代码并不完全与源码一模一样，在没有错误的前提下会有一些改动和删减（笔者认为这样做有助于理解）
  也不会逐行去解释代码，未提到的部分可以认为暂时不提也无大碍（如果真的不是因为粗心的话）
  然后，本篇所用的实例代码如下：
main.js
import Vue from &#39;vue&#39; import App from &#39;./App&#39; new Vue({ render: h =&gt; h(App) }).mount(&#39;#app&#39;) App.vue
&lt;template&gt; &lt;div&gt; &lt;div&gt;hello, {{ msg }}&lt;/div&gt; &lt;home&gt;&lt;/home&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; import home from &#39;./home&#39; export default { name: &#39;App&#39;, components: { home }, data() { return { msg: &#39;app&#39; } } } &lt;/script&gt; home.</div><div class="post-footer">
        <a href="/posts/new-vue%E5%88%B0%E6%89%80%E6%9C%89%E7%BB%84%E4%BB%B6mounte/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/vue/">Vue</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/posts/vue-%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2%E9%9D%9E%E6%A0%B9%E8%B7%AF%E5%BE%84/">Vue 应用部署在非根路径</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Author</a></span>&nbsp;<span class="post-publish">published on <time datetime="2020-10-15">2020-10-15</time></span>&nbsp;<span class="post-category">included in <a href="/categories/%E5%89%8D%E7%AB%AF/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>前端</a></span></div><div class="content">注：此处 Vue App 指的是由 Vue-CLI 3 创建的单页面应用，部署应用的 Web 服务器为 Nginx。
正文 谈到部署前端应用，大概所有有过相关经历的开发者都不会对这个流程感到陌生：npm run build -&gt; dist 目录整个 copy （手动、脚本或 devops 流水线）到对应 Web 服务器的指定目录。
然后在浏览器上输入服务器的地址（不需要任何路径）就可以访问到部署的那个应用了，在应用里面，你也只是按照后台开发给你 API 路径（大概率是个不包括服务器地址的绝对路径）去请求对应的数据，好像也没有做什么特殊的事情，应用完全运行正常。
这一切看起来十分的自然和理所应当，后面你又以相同的方式开发、部署了多个类似的应用，这种在根路径上的部署，对你来说轻车熟路，一切都很顺利。直到有一天，因为防火墙、或者资金紧张或者其他随便的什么原因，你们所有那些应用在公网上全都只能通过某一台服务器（假设叫 outer）访问了，也就是说原先可以分别通过 http://addressN （N = 1, 2, 3&hellip;）被  访问的各个应用，现在只能通过 http://address/appN/ 来访问了。这个时候，你想了想好像跟之前没什么区别，（拿 app1 举例）只不过原先部署到 http://address1 的 app1 只能换个内部的服务器（假设叫 inner1）部署了，然后在你重新部署了之后，负责配置 http://address 服务器 Nginx 的人告诉你：我把所有 /app1/ 开头的请求都转到 inner1 上了，你现在看下通过 http://address/app1/ 是不是能访问到 app1。
你内心感觉应该没什么问题地在浏览器上访问了那个地址：浏览器 Tab 条上 app1 的页面 title 出来了，但是整个页面一片空白。然后你很熟练地打开了控制台的 Network 发现，那些 js 和 css 资源都是 404，你很快的察觉到原因是由于这些资源的路径有问题，它们的格式分别是 /js/xx.</div><div class="post-footer">
        <a href="/posts/vue-%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2%E9%9D%9E%E6%A0%B9%E8%B7%AF%E5%BE%84/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/vue/">Vue</a>,&nbsp;<a href="/tags/nginx/">Nginx</a></div></div>
</article><ul class="pagination"><li class="page-item ">
                    <span class="page-link">
                        <a href="/">1</a>
                    </span>
                </li><li class="page-item ">
                    <span class="page-link">
                        <a href="/page/2/">2</a>
                    </span>
                </li><li class="page-item ">
                    <span class="page-link">
                        <a href="/page/3/">3</a>
                    </span>
                </li><li class="page-item active">
                    <span class="page-link">
                        <a href="/page/4/">4</a>
                    </span>
                </li></ul></div></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.68.3">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank"></a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"data":{"id-1":"This is my cool site"},"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-1":["id-1"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
