<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>github action - Tag - Kisama&#39;s Blog</title>
        <link>https://moshimoshi.top/tags/github-action/</link>
        <description>github action - Tag - Kisama&#39;s Blog</description>
        <generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Mon, 07 Jun 2021 18:24:13 &#43;0000</lastBuildDate><atom:link href="https://moshimoshi.top/tags/github-action/" rel="self" type="application/rss+xml" /><item>
    <title>github action 配置自动打包发布前端项目</title>
    <link>https://moshimoshi.top/posts/github-action-%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E6%89%93%E5%8C%85%E5%8F%91%E5%B8%83%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE/</link>
    <pubDate>Mon, 07 Jun 2021 18:24:13 &#43;0000</pubDate>
    <author>Author</author>
    <guid>https://moshimoshi.top/posts/github-action-%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E6%89%93%E5%8C%85%E5%8F%91%E5%B8%83%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE/</guid>
    <description><![CDATA[前置条件  存在一对公、私钥，公钥在远程服务器用户 A（具体用户名随意）的 ~/.ssh/authrized_key 中，本地主机可通过私钥 ssh 登录用户 A 用户 A 对 /var/www/任意目录名（nginx 服务启动的根目录）有读写权限 私钥保存到项目的 secret 中（最好通过文本编辑器打开，然后粘贴复制，直接 cat 粘贴复制可能会导致 &ldquo;invalid format&rdquo;）  github action 操作步骤  将保存在 secret 中的私钥存到环境变量（感觉好像不存应该也可以？） 通过 actions/checkout 拉取代码和切换到项目根目录 通过 actions/setup-node 安装 node 和 npm  安装依赖，打包 将存在当前环境变量的私钥通过 echo 命令写到 github runner 的 ~/.ssh/id_rsa 文件中（其他目录或者其文件名也可以，只不过那样的话，scp 的时候就要显示指定完整路径名），并且将远程服务器的 host 添加到 ~/.ssh/known_hosts 文件中（此举好像为了是避免在第一次 ssh 陌生服务器时，系统会询问「是否确认要与远程服务器连接」而使得后续 action 中断） 通过 scp 命令将打包好的文件复制到远程服务器指定位置  完整 yml 文件 这里 SSH_KEY、SSH_PORT、HOST、SSH_PORT、USERNAME、TARGET_DIR 为提前在项目 secret 下配置的变量，如有需要像打包后的文件生成目录（此处是 ./docs/.vuepress/dist）也可以写进去。]]></description>
</item>
</channel>
</rss>
